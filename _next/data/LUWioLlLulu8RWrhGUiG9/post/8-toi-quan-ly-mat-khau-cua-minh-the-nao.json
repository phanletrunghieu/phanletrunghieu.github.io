{"pageProps":{"slug":"8-toi-quan-ly-mat-khau-cua-minh-the-nao","siteTitle":"Hlog - Code for fun","frontmatter":{"author":"Hieu Phan","date":"2020-10-07T08:00:00.000Z","image":"/images/8-toi-quan-ly-mat-khau-cua-minh-the-nao/cover.jpg","title":"Tôi quản lý 1 nùi mật khẩu thế nào?","readDuration":"15 min","categories":["Tip"]},"markdownBody":"\n## 1. Nhu cầu\n\n- Lưu được mật khẩu an toàn nhất có thể\n- Đồng bộ trên các nền tảng: Android, iOS, browser,..\n- Không giới hạn thiết bị\n- Hỗ trợ đăng nhập 2 lớp\n- Free càng tốt\n\n## 2. Tool mình đã từng sử dụng\n\n**Lastpass**\n\nTool khá xịn, đầy đủ các chức năng:\n\n- Đồng bộ trên các nền tảng: Android, iOS, browser,..\n- Không giới hạn thiết bị\n- Đặt biệt là free\n\n**1password**\n\nCó đầy đủ các tính năng xịn xò, nhưng không miễn phí.\n\n## 3. Giải pháp hiện tại mình đang dùng\n\nDạo 1 vòng tìm kiếm thì thấy những app có tính đăng nhập 2 lớp đều là gói premium hết.\n\nChuyển hướng qua tìm opensource thì thấy có thằng Bitwarden. App này có đủ tính năng mình cần và hỗ trợ self host.\n\n### Tìm 1 con server free:\n\n- EC2 t2.micro của Amazon\n- f1-micro của Google Cloud\n\n### Deploy Bitwarden server\n\n- Official (C#): https://github.com/bitwarden/server\n- Non-Official (Rust): https://github.com/dani-garcia/bitwarden_rs\n\nCó 2 option, ở đây mình dùng server Rust cho gọn nhẹ.\n\nChạy file `docker-compose.yaml`\n\n```yaml\nversion: '3'\n\nservices:\n  bitwarden:\n    image: bitwardenrs/server:1.16.3\n    restart: always\n    volumes:\n      - ./bw-data:/data\n    ports:\n      - 8080:80 # web, api, ...\n      - 3012:3012 # websockets\n    environment:\n      WEBSOCKET_ENABLED: 'true'\n      SIGNUPS_ALLOWED: 'true'\n      SHOW_PASSWORD_HINT: 'true'\n      ROCKET_WORKERS: 20\n      ADMIN_TOKEN: 'xxxxxxxhieudeptraixxxxxxx'\n      DOMAIN: https://xxxx.xxxx.xxx\n      SMTP_HOST: smtp.gmail.com\n      SMTP_FROM: abc@gmail.com\n      SMTP_PORT: 587\n      SMTP_SSL: 'true'\n      SMTP_USERNAME: abc@gmail.com\n      SMTP_PASSWORD: xxxxx\n```\n\nnginx config\n\n```nginx\nserver {\n    listen 80;\n    listen [::]:80;\n\n    server_name bws.example.com;\n\n    client_max_body_size 128M;\n\n    location / {\n        proxy_pass       http://localhost:8080;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n\n    location /notifications/hub {\n        proxy_pass         http://localhost:3012;\n        proxy_set_header   Host $host;\n        proxy_http_version 1.1;\n        proxy_set_header   Upgrade $http_upgrade;\n        proxy_set_header   Connection \"Upgrade\";\n    }\n\n    location /notifications/hub/negotiate {\n        proxy_pass http://localhost:8080;\n    }\n\n    location /admin {\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n\n        proxy_pass http://localhost:8080;\n    }\n}\n```\n\nConfig thêm https cho an toàn hơn\n\n### Tạo user\n\nVào https://your-domain.com/admin, điền admin token trong file docker-compose.yaml vào.\n\n![Đăng ký/đăng nhập Bitwarden](/images/8-toi-quan-ly-mat-khau-cua-minh-the-nao/1-dang-nhap.png)\n\n### Cài extension/app\n\n- Browser extension: https://github.com/bitwarden/browser\n- Android: https://play.google.com/store/apps/details?id=com.x8bit.bitwarden\n- iOS: https://apps.apple.com/us/app/bitwarden-password-manager/id1137397744\n\n## 4. Một vài hình ảnh nhá hàng\n\nWeb\n\n![Web](/images/8-toi-quan-ly-mat-khau-cua-minh-the-nao/2-web.png)\n\nXem password\n\n![Xem password](/images/8-toi-quan-ly-mat-khau-cua-minh-the-nao/3-add-password.png)\n\nExtension\n\n![Extension](/images/8-toi-quan-ly-mat-khau-cua-minh-the-nao/4-extension.png)\n\nExtension nhận diện mật khẩu\n\n![Extension nhận diện mật khẩu](/images/8-toi-quan-ly-mat-khau-cua-minh-the-nao/5-extension-detect-password.png)","categories":["ReactJS","K8s","Docker","GI/CD","Tip","Gitlab","Microservice"],"host":"https://phanletrunghieu.github.io"},"__N_SSG":true}